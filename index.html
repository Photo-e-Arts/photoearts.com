<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Photo & Arts - Gráfica e Personalizados</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background: #dbe3ec url('https://www.transparenttextures.com/patterns/symphony.png');
      color: #333;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      position: relative;
      background: #ff5a5f;
      padding: 1rem 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .logo {
      max-height: 120px;
    }
    .carrinho-icon {
      background: #fff;
      color: #ff5a5f;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      cursor: pointer;
    }
    .gallery {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1.5rem;
      padding: 2rem;
      flex-grow: 1;
    }
    .item {
      width: 280px;
      text-align: center;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 1rem;
      display: flex;
      flex-direction: column;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .item:hover {
      transform: scale(1.03);
    }
    .item img {
      width: 100%;
      border-radius: 12px;
      margin-bottom: 0.5rem;
    }
    .item h3 {
      margin: 0.5rem 0 0.2rem;
    }
    .item .preco del {
      color: #999;
      margin-right: 0.3rem;
    }
    .item .preco strong {
      color: #d32f2f;
    }
    .item button {
      background-color: #ff5a5f;
      color: white;
      padding: 0.6rem 1.2rem;
      border: none;
      border-radius: 8px;
      margin-top: 0.5rem;
      cursor: pointer;
    }
    .compra-area, .carrinho-pagina, .relatorio-pagina {
      display: none;
      padding: 2rem;
    }
    .produto-info img {
      max-width: 300px;
      border-radius: 12px;
    }
    .quantidade input {
      width: 50px;
      text-align: center;
    }
    .carrinho-item {
      background: #fff;
      margin-bottom: 1rem;
      padding: 1rem;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.5rem;
    }
    .sucesso, .info {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 1rem 2rem;
      border-radius: 6px;
      z-index: 1000;
    }
    .sucesso { background: #d4edda; border: 1px solid #c3e6cb; }
    .info { background: #fff3cd; border: 1px solid #ffeeba; }
    .total {
      margin: 1rem 0;
      font-weight: bold;
    }
    footer {
      background: #f2f2f2;
      text-align: center;
      padding: 1rem;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Logo Photo & Arts" class="logo" />
    <div class="carrinho-icon" onclick="abrirPaginaCarrinho()">Carrinho (<span id="contador-carrinho">0</span>)</div>
  </header>

  <section class="gallery" id="galeria"></section>

  <section class="compra-area" id="compra">
    <div class="produto-info">
      <img id="compra-img" src="" alt="Produto">
      <h2 id="compra-nome"></h2>
      <p class="preco"><del id="preco-antigo"></del> <strong id="preco-novo"></strong></p>
    </div>
    <div>
      <div class="quantidade">
        <label>Quantidade: </label>
        <input type="number" min="1" value="1" id="quantidade-input">
      </div>
      <button onclick="adicionarAoCarrinho()">Adicionar ao carrinho</button>
      <button onclick="finalizarCompraUnica()">Comprar agora</button>
      <a href="#" onclick="voltarGaleria()">← Voltar</a>
    </div>
  </section>

  <section class="carrinho-pagina" id="carrinho-pagina">
    <h2>Itens no carrinho</h2>
    <div id="lista-carrinho"></div>
    <p class="total">Total: R$ <span id="total-carrinho">0,00</span></p>
    <button onclick="comprarSelecionados()">Comprar agora</button>
    <a href="#" onclick="voltarGaleria()">← Voltar</a>
  </section>

  <section class="relatorio-pagina" id="relatorio-pagina">
    <h2>Relatório de Venda</h2>
    <div id="relatorio-lista"></div>
    <a href="#" onclick="voltarGaleria()">← Voltar</a>
  </section>

  <div class="sucesso" id="sucesso">Compra realizada com sucesso!</div>
  <div class="info" id="info">Itens adicionados ao carrinho!</div>
  <div class="info" id="apagado">Item excluído do carrinho!</div>

  <footer>
    <p>WhatsApp: <a href="https://wa.me/5585987014326" target="_blank">(85) 9.8701-4326</a> |
    Instagram: <a href="https://instagram.com/photo.arts.grafica" target="_blank">@photo.arts.grafica</a></p>
  </footer>

  <script>
    const produtos = [
      { nome: 'Caneca Ceará (Tipo 1)', imagem: 'canecaCearaTipo1.jpg', preco: 25, original: 30 },
      { nome: 'Caneca Fortaleza (Tipo 1)', imagem: 'canecaFortalezaTipo1.jpg', preco: 25, original: 30 },
      { nome: 'Caneca Corinthians (Tipo 1)', imagem: 'canecaCorinthiansTipo1.jpg', preco: 25, original: 30 },
      { nome: 'Caneca São Paulo (Tipo 1)', imagem: 'canecaSaoPauloTipo1.jpg', preco: 25, original: 30 },
      { nome: 'Caneca Flamengo (Tipo 4)', imagem: 'canecaFlamengoTipo4.jpg', preco: 30, original: 35 }
    ].sort((a, b) => {
      const tipoA = a.nome.match(/Tipo (\\d+)/);
      const tipoB = b.nome.match(/Tipo (\\d+)/);
      return (tipoA ? +tipoA[1] : 99) - (tipoB ? +tipoB[1] : 99);
    });

    const galeria = document.getElementById("galeria");
    produtos.forEach(p => {
      galeria.innerHTML += `
        <div class="item">
          <img src="${p.imagem}" alt="${p.nome}">
          <h3>${p.nome}</h3>
          <p class="preco"><del>R$ ${p.original},00</del> <strong>R$ ${p.preco},00</strong></p>
          <button onclick="abrirCompra('${p.imagem}', '${p.nome}', ${p.preco}, ${p.original})">Comprar</button>
        </div>`;
    });

    let carrinho = [];

    function abrirCompra(imagem, nome, preco, original) {
      document.getElementById('galeria').style.display = 'none';
      document.getElementById('compra').style.display = 'flex';
      document.getElementById('carrinho-pagina').style.display = 'none';
      document.getElementById('relatorio-pagina').style.display = 'none';
      document.getElementById('compra-img').src = imagem;
      document.getElementById('compra-nome').innerText = nome;
      document.getElementById('preco-antigo').innerText = `R$ ${original},00`;
      document.getElementById('preco-novo').innerText = `R$ ${preco},00`;
    }

    function voltarGaleria() {
      document.getElementById('galeria').style.display = 'flex';
      document.getElementById('compra').style.display = 'none';
      document.getElementById('carrinho-pagina').style.display = 'none';
      document.getElementById('relatorio-pagina').style.display = 'none';
      atualizarCarrinho();
    }

    function adicionarAoCarrinho() {
      const nome = document.getElementById('compra-nome').innerText;
      const qtd = parseInt(document.getElementById('quantidade-input').value);
      const preco = document.getElementById('preco-novo').innerText;
      carrinho.push({ nome, qtd, preco });
      document.getElementById('info').style.display = 'block';
      atualizarCarrinho();
    }

    function finalizarCompraUnica() {
      document.getElementById('sucesso').style.display = 'block';
    }

    function atualizarCarrinho() {
      document.getElementById('contador-carrinho').innerText = carrinho.reduce((t, i) => t + i.qtd, 0);
    }

    function atualizarTotalCarrinho() {
      let total = 0;
      carrinho.forEach((item, i) => {
        if (document.getElementById(`item-${i}`)?.checked) {
          const val = parseFloat(item.preco.replace('R$ ', '').replace(',00', ''));
          total += val * item.qtd;
        }
      });
      document.getElementById("total-carrinho").innerText = total.toFixed(2).replace('.', ',');
    }

    function abrirPaginaCarrinho() {
      document.getElementById('galeria').style.display = 'none';
      document.getElementById('compra').style.display = 'none';
      document.getElementById('relatorio-pagina').style.display = 'none';
      document.getElementById('carrinho-pagina').style.display = 'block';

      const lista = document.getElementById('lista-carrinho');
      lista.innerHTML = '';
      carrinho.forEach((item, i) => {
        lista.innerHTML += `
          <div class="carrinho-item">
            <input type="checkbox" id="item-${i}" checked onchange="atualizarTotalCarrinho()">
            <span>${item.nome}</span>
            <input type="number" min="1" value="${item.qtd}" onchange="atualizarQuantidade(${i}, this.value)">
            <span>${item.preco}</span>
            <button onclick="excluirItem(${i})">Excluir</button>
          </div>`;
      });
      lista.innerHTML += `<button onclick="limparCarrinho()">Limpar Tudo</button>`;
      atualizarTotalCarrinho();
    }

    function atualizarQuantidade(i, novaQtd) {
      carrinho[i].qtd = parseInt(novaQtd);
      atualizarTotalCarrinho();
      atualizarCarrinho();
    }

    function excluirItem(index) {
      if (confirm("Tem certeza que deseja excluir este item do carrinho?")) {
        carrinho.splice(index, 1);
        abrirPaginaCarrinho();
        atualizarCarrinho();
        document.getElementById('apagado').style.display = 'block';
      }
    }

    function limparCarrinho() {
      if (confirm("Tem certeza que deseja remover todos os itens?")) {
        carrinho = [];
        abrirPaginaCarrinho();
        atualizarCarrinho();
        document.getElementById('apagado').style.display = 'block';
      }
    }

    function comprarSelecionados() {
      const vendidos = [];
      carrinho = carrinho.filter((item, i) => {
        if (document.getElementById(`item-${i}`)?.checked) {
          vendidos.push(item);
          return false;
        }
        return true;
      });
      atualizarCarrinho();
      mostrarRelatorio(vendidos);
    }

    function mostrarRelatorio(itens) {
      document.getElementById('galeria').style.display = 'none';
      document.getElementById('compra').style.display = 'none';
      document.getElementById('carrinho-pagina').style.display = 'none';
      const relatorio = document.getElementById('relatorio-lista');
      document.getElementById('relatorio-pagina').style.display = 'block';

      let total = 0;
      relatorio.innerHTML = '<ul>';
      itens.forEach(item => {
        const preco = parseFloat(item.preco.replace('R$ ', '').replace(',00', ''));
        const subtotal = preco * item.qtd;
        total += subtotal;
        relatorio.innerHTML += `<li><strong>${item.nome}</strong> — ${item.qtd}x R$ ${preco},00 = <strong>R$ ${subtotal.toFixed(2).replace('.', ',')}</strong></li>`;
      });
      relatorio.innerHTML += `</ul><p><strong>Total da venda:</strong> R$ ${total.toFixed(2).replace('.', ',')}</p>`;
    }
  </script>
</body>
</html>
